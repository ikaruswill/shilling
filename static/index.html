<!DOCTYPE html>
<html>
<head>
	<link href="https://fonts.googleapis.com/css?family=Lato" rel="stylesheet">
	<style>
		body { background-color: #E1F5FE; font-family: 'Lato', sans-serif; text-align: center; }
		.chartButton  { background-color: #36A2EB; color:white; width: 80px; cursor: pointer;
				  		text-decoration: none; border-radius: 5px; border: none; outline: none;
				  		margin-left: auto; margin-right: auto; padding: 5px; margin-bottom: 5px;}
		.optionButton { background-color: #FF6384; color:white; width: 80px; cursor: pointer;
				  		text-decoration: none; border-radius: 5px; border: none; outline: none;
				  		margin-left: auto; margin-right: auto; padding: 5px; margin-bottom: 5px;}
		.chart#chart2 { display: none; }
		.chart#chart3 { display: none; }
		.chart 		  { position: relative; }
		.chartVis 	  { margin-right: auto; margin-left: auto; margin-bottom: 20px; }
		.progress     { width: 300px; border-radius: 2px;
						background-color: #36A2EB; position: relative; }
		.bar 		  { width: 0%; height: 10px; border-radius: 2px; background-color: #FFCE56; }
		.goal 		  { position: absolute; width: 5px; height: 10px;
						background-color: #FF6384; left: 70%;}
		.goalText 	  { position: absolute; width: 5px; height: 10px; top: -14px; left: 67%;
						font-size: 12px; }
		.mascot		  { position: absolute; top: 108px; right: 92px; width: 120px;}
	</style>
</head>
<body>
	<!-- === HTML Content === -->
	<h3 class="title">Savings Report</h3>
	<div class="progress">
		<div class="goalText">Goal</div>
		<div class="goal"></div>
		<div class="bar"></div></div><br>
	<div class="chart" id="chart1">
		<canvas class="chartVis" id="chart1Vis" width="300" height="300"></canvas>
		<img class="mascot" src="mascot.png"></div>
	<div class="chart" id="chart2">
		<canvas class="chartVis" id="chart2Vis" width="300" height="300"></canvas></div>
	<div class="chart" id="chart3">
		<canvas class="chartVis" id="chart3Vis" width="300" height="300"></canvas></div>
	<div class="buttons">
		<button class="chartButton" id="chart1">Chart 1</button>
		<button class="chartButton" id="chart2">Chart 2</button>
		<button class="chartButton" id="chart3">Chart 3</button></div>
	<div class="buttons">
		<button class="optionButton" id="weekly">Weekly</button>
		<button class="optionButton" id="monthly">Monthly</button>
		<button class="optionButton" id="yearly">Yearly</button></div>
	<!-- === HTML Content End === -->

	<!-- === Scripts === -->
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.5.0/Chart.bundle.min.js"></script>
	<script type="text/javascript">

		var option = "weekly";
		var chart = "chart1";
		var url = "http://ks-uppercut.github.io/"; //TODO: replace this with correct url
		var userId = 0; //TODO: get from url parameter
		var data = undefined;

		$.get(url, {userId : userId}, function(result) {
			data = result;
			moveProgressBar();
			$.getScript("chart1.js");
			$('.chartButton').click(function() {
				chart = this.id;
				buttonClick();
			});
			$('.optionButton').click(function() {
				option = this.id;
				buttonClick();
			});
	    }).fail(function() {
		    console.log( "=== Error fetching data from " + url + " ===");
		}).always(function() {
		    console.log( "=== Finished fecthing data from " + url + " ===");
		});

		function buttonClick() {
			$('.chart').hide(); //hide all charts
			$('#'+chart).show(); //only show selected chart
			if (chart === "chart1") $.getScript("chart1.js");
			if (chart === "chart2") $.getScript("chart2.js");
			if (chart === "chart3") $.getScript("chart3.js");
		}

		function moveProgressBar() {
			$( ".bar" ).animate({width: "+=90%"}, 2000);
		}

	</script>
	<!-- === Scripts End === -->
</body>
</html>